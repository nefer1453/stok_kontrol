<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Stok Kontrol Motoru</title>

<style>
:root{
  --bg:#ffffff;
  --text:#0f172a;
  --border:#e5e7eb;
  --green:#16a34a;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}

main{
  max-width:520px;
  margin:auto;
  padding:20px;
}

h2{
  margin:0 0 6px 0;
}

.hint{
  font-size:12px;
  color:#64748b;
  margin-bottom:14px;
}

.row{
  display:flex;
  gap:10px;
}

input{
  flex:1;
  padding:14px;
  font-size:16px;
  border-radius:14px;
  border:1px solid var(--border);
  outline:none;
}

button{
  padding:14px 16px;
  font-size:16px;
  border-radius:14px;
  border:none;
  background:var(--green);
  color:white;
  font-weight:700;
}

.list{
  margin-top:18px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.item{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
}
</style>
</head>

<body>
<main>

<h2>Stok Kontrol Motoru</h2>
<div class="hint">v0.3 – stabil temel yapı</div>

<div class="row">
  <input id="prodName" placeholder="Ürün adı" autocomplete="off">
  <button id="btnAdd">Ekle</button>
</div>

<div id="list" class="list"></div>

</main>

<script>
const KEY="stok_kontrol_v1";
const $=id=>document.getElementById(id);

let state = JSON.parse(localStorage.getItem(KEY) || "null") 
            || { items:[], ops:[] };

function save(){
  localStorage.setItem(KEY, JSON.stringify(state));
}

function render(){
  const box = $("list");
  box.innerHTML="";

  if(!state.items.length){
    box.innerHTML = "<div class='item'>Henüz ürün yok.</div>";
    return;
  }

  for(const it of state.items){
    const el=document.createElement("div");
    el.className="item";
    el.textContent=it.name;
    box.appendChild(el);
  }
}

function addProduct(){
  const input = $("prodName");
  const name = (input.value || "").trim();

  if(!name){
    input.focus();
    return;
  }

  state.items.push({
    id:Date.now().toString(16),
    name,
    ts:Date.now()
  });

  save();
  input.value="";
  render();

  // focus'u render'dan sonra geri ver
  requestAnimationFrame(()=>input.focus());
}

$("btnAdd").onclick = addProduct;

$("prodName").addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    addProduct();
  }
});

render();
$("prodName").focus();
</script>

</body>
</html>
