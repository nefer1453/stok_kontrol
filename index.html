<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stok Kontrol Motoru</title>
  <meta name="theme-color" content="#0b1220">
  <link rel="stylesheet" href="./app/app.css">
</head>
<body>

<header>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Stok Kontrol Motoru</h1>
        <div class="sub">Clean v2 — ürün + işlem + rapor (stabil temel)</div>
      </div>
      <div class="row">
        <span class="pill">Local DB: stok_kontrol_db_v2</span>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="grid">
    <!-- SOL: Ürünler -->
    <section class="card">
      <h2>Ürünler</h2>
      <div class="hint">Ürün ekle → ürün kartından “İşlem” aç.</div>
      <div class="hr"></div>

      <div class="row">
        <input id="prodName" placeholder="Ürün adı" inputmode="text" autocomplete="off">
        <button id="btnAdd" class="btnOK" type="button">Ekle</button>
      </div>

      <div class="row">
        <input id="search" placeholder="Ara (liste sabit kalsın)" inputmode="text" autocomplete="off">
      </div>

      <div id="productList" class="list"></div>

      <div class="footerNote">Not: Donma/boş ekran olursa alttaki kırmızı hata bandı mesaj verir.</div>
    </section>

    <!-- SAĞ: Rapor -->
    <section class="card" id="cardReport">
      <div class="row" style="justify-content:space-between">
        <div>
          <h2 style="margin-bottom:2px">Rapor</h2>
          <div class="hint">Özet (bugün / 7 gün / 30 gün)</div>
        </div>
        <div class="row">
          <button id="btnReportToday" class="btnBLUE smallBtn" type="button">Bugün</button>
          <button id="btnReport7" class="btnBLUE smallBtn" type="button">7g</button>
          <button id="btnReport30" class="btnBLUE smallBtn" type="button">30g</button>
        </div>
      </div>

      <div class="hr"></div>

      <div class="kpiRow">
        <div class="kpi"><div class="k">Pencere</div><div class="v"><span id="rDays">30</span>g</div></div>
        <div class="kpi"><div class="k">Artış</div><div class="v" id="rPlus">0</div></div>
        <div class="kpi"><div class="k">Azalış</div><div class="v" id="rMinus">0</div></div>
        <div class="kpi"><div class="k">Net</div><div class="v" id="rNet">0</div></div>
      </div>

      <div class="hr"></div>

      <div class="hint" style="margin-bottom:6px">Tür dağılımı</div>
      <div id="rTypes" class="row"></div>

      <div class="hr"></div>

      <div class="hint" style="margin-bottom:6px">Top ürünler</div>
      <div id="rTop" class="row"></div>

      <div class="hr"></div>

      <div class="hint" style="margin-bottom:6px">Akıl / risk</div>
      <div id="rBrain" class="list"></div>
    </section>
  </div>
</main>

<!-- Modal -->
<div id="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999;padding:16px">
  <div class="card" style="max-width:560px;margin:40px auto">
    <div class="row" style="justify-content:space-between">
      <div>
        <div class="hint">İşlem</div>
        <div class="name" id="opTitle">Ürün</div>
      </div>
      <button id="btnClose" type="button">Kapat</button>
    </div>

    <div class="hr"></div>

    <div class="row">
      <select id="opType">
        <option value="siparis">Sipariş (+)</option>
        <option value="dagilim">Dağılım (+)</option>
        <option value="satis">Satış (-)</option>
        <option value="skt">SKT (-)</option>
        <option value="iade">İade (-)</option>
      </select>
      <input id="opQty" inputmode="numeric" placeholder="Adet" value="1">
    </div>

    <div class="row">
      <input id="opSub" placeholder="Alt kırılım (opsiyonel): normal/iskonto/insert, sebep vb." autocomplete="off">
    </div>

    <div class="row" style="justify-content:flex-end">
      <button id="btnOpSave" class="btnOK" type="button">İşlem Ekle</button>
    </div>
  </div>
</div>

<script defer src="./app/app.js"></script>
</body>
</html>
